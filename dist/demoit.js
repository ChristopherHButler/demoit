!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Split=e()}(this,function(){"use strict";var N=window,I=N.document,L="addEventListener",D="removeEventListener",B="getBoundingClientRect",P="horizontal",F=function(){return!1},R=N.attachEvent&&!N[L],i=["","-webkit-","-moz-","-o-"].filter(function(t){var e=I.createElement("div");return e.style.cssText="width:"+t+"calc(9px)",!!e.style.length}).shift()+"calc",o=function(t){return"string"==typeof t||t instanceof String},H=function(t){if(o(t)){var e=I.querySelector(t);if(!e)throw new Error("Selector "+t+" did not match a DOM element");return e}return t},U=function(t,e,n){var r=t[e];return void 0!==r?r:n},G=function(t,e,n,r){if(e){if("end"===r)return 0;if("center"===r)return t/2}else if(n){if("start"===r)return 0;if("center"===r)return t/2}return t},V=function(t,e){var n=I.createElement("div");return n.className="gutter gutter-"+e,n},J=function(t,e,n){var r={};return o(e)?r[t]=e:r[t]=R?e+"%":i+"("+e+"% - "+n+"px)",r},K=function(t,e){var n;return(n={})[t]=e+"px",n};return function(t,c){void 0===c&&(c={});var u,e,i,o,n,l,f=t;Array.from&&(f=Array.from(f));var h=H(f[0]).parentNode,p=getComputedStyle?getComputedStyle(h).flexDirection:null,d=U(c,"sizes")||f.map(function(){return 100/f.length}),r=U(c,"minSize",100),g=Array.isArray(r)?r:f.map(function(){return r}),a=U(c,"expandToMin",!1),m=U(c,"gutterSize",10),v=U(c,"gutterAlign","center"),y=U(c,"snapOffset",30),b=U(c,"dragInterval",1),w=U(c,"direction",P),x=U(c,"cursor",w===P?"col-resize":"row-resize"),_=U(c,"gutter",V),s=U(c,"elementStyle",J),k=U(c,"gutterStyle",K);function C(e,t,n,r){var i=s(u,t,n,r);Object.keys(i).forEach(function(t){e.style[t]=i[t]})}function E(){return l.map(function(t){return t.size})}function S(t){return"touches"in t?t.touches[0][e]:t[e]}function j(t){var e=l[this.a],n=l[this.b],r=e.size+n.size;e.size=t/this.size*r,n.size=r-t/this.size*r,C(e.element,e.size,this._b,e.i),C(n.element,n.size,this._c,n.i)}function M(){var t=l[this.a].element,e=l[this.b].element,n=t[B](),r=e[B]();this.size=n[u]+r[u]+this._b+this._c,this.start=n[i],this.end=n[o]}function q(o){var a=function(t){if(!getComputedStyle)return null;var e=getComputedStyle(t);return t[n]-(w===P?parseFloat(e.paddingLeft)+parseFloat(e.paddingRight):parseFloat(e.paddingTop)+parseFloat(e.paddingBottom))}(h);if(null===a)return o;var s=0,c=[],t=o.map(function(t,e){var n=a*t/100,r=G(m,0===e,e===o.length-1,v),i=g[e]+r;return n<i?(s+=i-n,c.push(0),i):(c.push(n-i),n)});return 0===s?o:t.map(function(t,e){var n=t;if(0<s&&0<c[e]-s){var r=Math.min(s,c[e]-s);s-=r,n=t-r}return n/a*100})}w===P?(u="width",e="clientX",i="left",o="right",n="clientWidth"):"vertical"===w&&(u="height",e="clientY",i="top",o="bottom",n="clientHeight"),d=q(d);var O=[];function A(t){var e=t.i===O.length,n=e?O[t.i-1]:O[t.i];M.call(n);var r=e?n.size-t.minSize-n._c:t.minSize+n._b;j.call(n,r)}function T(t){var o=q(t);o.forEach(function(t,e){if(0<e){var n=O[e-1],r=l[n.a],i=l[n.b];r.size=o[e-1],i.size=t,C(r.element,r.size,n._b),C(i.element,i.size,n._c)}})}function z(n,r){O.forEach(function(e){if(!0!==r?e.parent.removeChild(e.gutter):(e.gutter[D]("mousedown",e._a),e.gutter[D]("touchstart",e._a)),!0!==n){var t=s(u,e.a.size,e._b);Object.keys(t).forEach(function(t){l[e.a].element.style[t]="",l[e.b].element.style[t]=""})}})}return(l=f.map(function(t,e){var n,r,i,o={element:H(t),size:d[e],minSize:g[e],i:e};if(0<e&&((n={a:e-1,b:e,dragging:!1,direction:w,parent:h})._b=G(m,e-1==0,!1,v),n._c=G(m,!1,e===f.length-1,v),"row-reverse"===p||"column-reverse"===p)){var a=n.a;n.a=n.b,n.b=a}if(!R&&0<e){var s=_(e,w,o.element);r=s,i=k(u,m,e),Object.keys(i).forEach(function(t){r.style[t]=i[t]}),n._a=function(t){if(!("button"in t&&0!==t.button)){var e=this,n=l[e.a].element,r=l[e.b].element;e.dragging||U(c,"onDragStart",F)(E()),t.preventDefault(),e.dragging=!0,e.move=function(t){var e,n=l[this.a],r=l[this.b];this.dragging&&(e=S(t)-this.start+(this._b-this.dragOffset),1<b&&(e=Math.round(e/b)*b),e<=n.minSize+y+this._b?e=n.minSize+this._b:e>=this.size-(r.minSize+y+this._c)&&(e=this.size-(r.minSize+this._c)),j.call(this,e),U(c,"onDrag",F)())}.bind(e),e.stop=function(){var t=this,e=l[t.a].element,n=l[t.b].element;t.dragging&&U(c,"onDragEnd",F)(E()),t.dragging=!1,N[D]("mouseup",t.stop),N[D]("touchend",t.stop),N[D]("touchcancel",t.stop),N[D]("mousemove",t.move),N[D]("touchmove",t.move),t.stop=null,t.move=null,e[D]("selectstart",F),e[D]("dragstart",F),n[D]("selectstart",F),n[D]("dragstart",F),e.style.userSelect="",e.style.webkitUserSelect="",e.style.MozUserSelect="",e.style.pointerEvents="",n.style.userSelect="",n.style.webkitUserSelect="",n.style.MozUserSelect="",n.style.pointerEvents="",t.gutter.style.cursor="",t.parent.style.cursor="",I.body.style.cursor=""}.bind(e),N[L]("mouseup",e.stop),N[L]("touchend",e.stop),N[L]("touchcancel",e.stop),N[L]("mousemove",e.move),N[L]("touchmove",e.move),n[L]("selectstart",F),n[L]("dragstart",F),r[L]("selectstart",F),r[L]("dragstart",F),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.MozUserSelect="none",n.style.pointerEvents="none",r.style.userSelect="none",r.style.webkitUserSelect="none",r.style.MozUserSelect="none",r.style.pointerEvents="none",e.gutter.style.cursor=x,e.parent.style.cursor=x,I.body.style.cursor=x,M.call(e),e.dragOffset=S(t)-e.end}}.bind(n),s[L]("mousedown",n._a),s[L]("touchstart",n._a),h.insertBefore(s,o.element),n.gutter=s}return C(o.element,o.size,G(m,0===e,e===f.length-1,v)),0<e&&O.push(n),o})).forEach(function(t){var e=t.element[B]()[u];e<t.minSize&&(a?A(t):t.minSize=e)}),R?{setSizes:T,destroy:z}:{setSizes:T,getSizes:E,collapse:function(t){A(l[t])},destroy:z,parent:h,pairs:O}}}),function(n){var r={};function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=n,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=9)}([function(t,e,n){t.exports=n(10)},function(t,e){function c(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}t.exports=function(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function i(t){c(r,e,n,i,o,"next",t)}function o(t){c(r,e,n,i,o,"throw",t)}i(void 0)})}}},function(t,e,n){var r=n(12),i=n(13),o=n(14);t.exports=function(t,e){return r(t)||i(t,e)||o()}},function(t,e,n){var i=n(15);t.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}},function(t,e,n){var r,i;function m(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}m.prototype.diff_main=function(t,e,n,r){void 0===r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var i=r;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];void 0===n&&(n=!0);var o=n,a=this.diff_commonPrefix(t,e),s=t.substring(0,a);t=t.substring(a),e=e.substring(a),a=this.diff_commonSuffix(t,e);var c=t.substring(t.length-a);t=t.substring(0,t.length-a),e=e.substring(0,e.length-a);var u=this.diff_compute_(t,e,o,i);return s&&u.unshift([0,s]),c&&u.push([0,c]),this.diff_cleanupMerge(u),u},m.prototype.diff_compute_=function(t,e,n,r){var i;if(!t)return[[1,e]];if(!e)return[[-1,t]];var o=t.length>e.length?t:e,a=t.length>e.length?e:t,s=o.indexOf(a);if(-1!=s)return i=[[1,o.substring(0,s)],[0,a],[1,o.substring(s+a.length)]],t.length>e.length&&(i[0][0]=i[2][0]=-1),i;if(1==a.length)return[[-1,t],[1,e]];var c=this.diff_halfMatch_(t,e);if(c){var u=c[0],l=c[1],f=c[2],h=c[3],p=c[4],d=this.diff_main(u,f,n,r),g=this.diff_main(l,h,n,r);return d.concat([[0,p]],g)}return n&&100<t.length&&100<e.length?this.diff_lineMode_(t,e,r):this.diff_bisect_(t,e,r)},m.prototype.diff_lineMode_=function(t,e,n){t=(l=this.diff_linesToChars_(t,e)).chars1,e=l.chars2;var r=l.lineArray,i=this.diff_main(t,e,!1,n);this.diff_charsToLines_(i,r),this.diff_cleanupSemantic(i),i.push([0,""]);for(var o=0,a=0,s=0,c="",u="";o<i.length;){switch(i[o][0]){case 1:s++,u+=i[o][1];break;case-1:a++,c+=i[o][1];break;case 0:if(1<=a&&1<=s){i.splice(o-a-s,a+s),o=o-a-s;for(var l,f=(l=this.diff_main(c,u,!1,n)).length-1;0<=f;f--)i.splice(o,0,l[f]);o+=l.length}a=s=0,u=c=""}o++}return i.pop(),i},m.prototype.diff_bisect_=function(t,e,n){for(var r=t.length,i=e.length,o=Math.ceil((r+i)/2),a=o,s=2*o,c=new Array(s),u=new Array(s),l=0;l<s;l++)c[l]=-1,u[l]=-1;c[a+1]=0;for(var f=r-i,h=f%2!=(u[a+1]=0),p=0,d=0,g=0,m=0,v=0;v<o&&!((new Date).getTime()>n);v++){for(var y=-v+p;y<=v-d;y+=2){for(var b=a+y,w=(E=y==-v||y!=v&&c[b-1]<c[b+1]?c[b+1]:c[b-1]+1)-y;E<r&&w<i&&t.charAt(E)==e.charAt(w);)E++,w++;if(r<(c[b]=E))d+=2;else if(i<w)p+=2;else if(h&&0<=(k=a+f-y)&&k<s&&-1!=u[k]&&(_=r-u[k])<=E)return this.diff_bisectSplit_(t,e,E,w,n)}for(var x=-v+g;x<=v-m;x+=2){for(var _,k=a+x,C=(_=x==-v||x!=v&&u[k-1]<u[k+1]?u[k+1]:u[k-1]+1)-x;_<r&&C<i&&t.charAt(r-_-1)==e.charAt(i-C-1);)_++,C++;if(r<(u[k]=_))m+=2;else if(i<C)g+=2;else if(!h){var E;if(0<=(b=a+f-x)&&b<s&&-1!=c[b]&&(w=a+(E=c[b])-b,(_=r-_)<=E))return this.diff_bisectSplit_(t,e,E,w,n)}}}return[[-1,t],[1,e]]},m.prototype.diff_bisectSplit_=function(t,e,n,r,i){var o=t.substring(0,n),a=e.substring(0,r),s=t.substring(n),c=e.substring(r),u=this.diff_main(o,a,!1,i),l=this.diff_main(s,c,!1,i);return u.concat(l)},m.prototype.diff_linesToChars_=function(t,e){var a=[],s={};function n(t){for(var e="",n=0,r=-1,i=a.length;r<t.length-1;){-1==(r=t.indexOf("\n",n))&&(r=t.length-1);var o=t.substring(n,r+1);n=r+1,(s.hasOwnProperty?s.hasOwnProperty(o):void 0!==s[o])?e+=String.fromCharCode(s[o]):(e+=String.fromCharCode(i),s[o]=i,a[i++]=o)}return e}return a[0]="",{chars1:n(t),chars2:n(e),lineArray:a}},m.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var r=t[n][1],i=[],o=0;o<r.length;o++)i[o]=e[r.charCodeAt(o)];t[n][1]=i.join("")}},m.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(o,i)==e.substring(o,i)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i},m.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(t.length-i,t.length-o)==e.substring(e.length-i,e.length-o)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i},m.prototype.diff_commonOverlap_=function(t,e){var n=t.length,r=e.length;if(0==n||0==r)return 0;r<n?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var i=Math.min(n,r);if(t==e)return i;for(var o=0,a=1;;){var s=t.substring(i-a),c=e.indexOf(s);if(-1==c)return o;a+=c,0!=c&&t.substring(i-a)!=e.substring(0,a)||(o=a,a++)}},m.prototype.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||2*r.length<n.length)return null;var h=this;function i(t,e,n){for(var r,i,o,a,s=t.substring(n,n+Math.floor(t.length/4)),c=-1,u="";-1!=(c=e.indexOf(s,c+1));){var l=h.diff_commonPrefix(t.substring(n),e.substring(c)),f=h.diff_commonSuffix(t.substring(0,n),e.substring(0,c));u.length<f+l&&(u=e.substring(c-f,c)+e.substring(c,c+l),r=t.substring(0,n-f),i=t.substring(n+l),o=e.substring(0,c-f),a=e.substring(c+l))}return 2*u.length>=t.length?[r,i,o,a,u]:null}var o,a,s,c,u,l=i(n,r,Math.ceil(n.length/4)),f=i(n,r,Math.ceil(n.length/2));return l||f?(o=f?l&&l[4].length>f[4].length?l:f:l,t.length>e.length?(a=o[0],s=o[1],c=o[2],u=o[3]):(c=o[0],u=o[1],a=o[2],s=o[3]),[a,s,c,u,o[4]]):null},m.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],r=0,i=null,o=0,a=0,s=0,c=0,u=0;o<t.length;)0==t[o][0]?(a=c,s=u,u=c=0,i=t[n[r++]=o][1]):(1==t[o][0]?c+=t[o][1].length:u+=t[o][1].length,i&&i.length<=Math.max(a,s)&&i.length<=Math.max(c,u)&&(t.splice(n[r-1],0,[-1,i]),t[n[r-1]+1][0]=1,r--,o=0<--r?n[r-1]:-1,u=c=s=a=0,e=!(i=null))),o++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),o=1;o<t.length;){if(-1==t[o-1][0]&&1==t[o][0]){var l=t[o-1][1],f=t[o][1],h=this.diff_commonOverlap_(l,f),p=this.diff_commonOverlap_(f,l);p<=h?(h>=l.length/2||h>=f.length/2)&&(t.splice(o,0,[0,f.substring(0,h)]),t[o-1][1]=l.substring(0,l.length-h),t[o+1][1]=f.substring(h),o++):(p>=l.length/2||p>=f.length/2)&&(t.splice(o,0,[0,l.substring(0,p)]),t[o-1][0]=1,t[o-1][1]=f.substring(0,f.length-p),t[o+1][0]=-1,t[o+1][1]=l.substring(p),o++),o++}o++}},m.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),r=e.charAt(0),i=n.match(m.nonAlphaNumericRegex_),o=r.match(m.nonAlphaNumericRegex_),a=i&&n.match(m.whitespaceRegex_),s=o&&r.match(m.whitespaceRegex_),c=a&&n.match(m.linebreakRegex_),u=s&&r.match(m.linebreakRegex_),l=c&&t.match(m.blanklineEndRegex_),f=u&&e.match(m.blanklineStartRegex_);return l||f?5:c||u?4:i&&!a&&s?3:a||s?2:i||o?1:0}for(var n=1;n<t.length-1;){if(0==t[n-1][0]&&0==t[n+1][0]){var r=t[n-1][1],i=t[n][1],o=t[n+1][1],a=this.diff_commonSuffix(r,i);if(a){var s=i.substring(i.length-a);r=r.substring(0,r.length-a),i=s+i.substring(0,i.length-a),o=s+o}for(var c=r,u=i,l=o,f=e(r,i)+e(i,o);i.charAt(0)===o.charAt(0);){r+=i.charAt(0),i=i.substring(1)+o.charAt(0),o=o.substring(1);var h=e(r,i)+e(i,o);f<=h&&(f=h,c=r,u=i,l=o)}t[n-1][1]!=c&&(c?t[n-1][1]=c:(t.splice(n-1,1),n--),t[n][1]=u,l?t[n+1][1]=l:(t.splice(n+1,1),n--))}n++}},m.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,m.whitespaceRegex_=/\s/,m.linebreakRegex_=/[\r\n]/,m.blanklineEndRegex_=/\n\r?\n$/,m.blanklineStartRegex_=/^\r?\n\r?\n/,m.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],r=0,i=null,o=0,a=!1,s=!1,c=!1,u=!1;o<t.length;)0==t[o][0]?(i=t[o][1].length<this.Diff_EditCost&&(c||u)?(a=c,s=u,t[n[r++]=o][1]):(r=0,null),c=u=!1):(-1==t[o][0]?u=!0:c=!0,i&&(a&&s&&c&&u||i.length<this.Diff_EditCost/2&&a+s+c+u==3)&&(t.splice(n[r-1],0,[-1,i]),t[n[r-1]+1][0]=1,r--,i=null,a&&s?(c=u=!0,r=0):(o=0<--r?n[r-1]:-1,c=u=!1),e=!0)),o++;e&&this.diff_cleanupMerge(t)},m.prototype.diff_cleanupMerge=function(t){t.push([0,""]);for(var e,n=0,r=0,i=0,o="",a="";n<t.length;)switch(t[n][0]){case 1:i++,a+=t[n][1],n++;break;case-1:r++,o+=t[n][1],n++;break;case 0:1<r+i?(0!==r&&0!==i&&(0!==(e=this.diff_commonPrefix(a,o))&&(0<n-r-i&&0==t[n-r-i-1][0]?t[n-r-i-1][1]+=a.substring(0,e):(t.splice(0,0,[0,a.substring(0,e)]),n++),a=a.substring(e),o=o.substring(e)),0!==(e=this.diff_commonSuffix(a,o))&&(t[n][1]=a.substring(a.length-e)+t[n][1],a=a.substring(0,a.length-e),o=o.substring(0,o.length-e))),0===r?t.splice(n-i,r+i,[1,a]):0===i?t.splice(n-r,r+i,[-1,o]):t.splice(n-r-i,r+i,[-1,o],[1,a]),n=n-r-i+(r?1:0)+(i?1:0)+1):0!==n&&0==t[n-1][0]?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,r=i=0,a=o=""}""===t[t.length-1][1]&&t.pop();var s=!1;for(n=1;n<t.length-1;)0==t[n-1][0]&&0==t[n+1][0]&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),s=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),s=!0)),n++;s&&this.diff_cleanupMerge(t)},m.prototype.diff_xIndex=function(t,e){var n,r=0,i=0,o=0,a=0;for(n=0;n<t.length&&(1!==t[n][0]&&(r+=t[n][1].length),-1!==t[n][0]&&(i+=t[n][1].length),!(e<r));n++)o=r,a=i;return t.length!=n&&-1===t[n][0]?a:a+(e-o)},m.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,r=/</g,i=/>/g,o=/\n/g,a=0;a<t.length;a++){var s=t[a][0],c=t[a][1].replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(o,"&para;<br>");switch(s){case 1:e[a]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case-1:e[a]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:e[a]="<span>"+c+"</span>"}}return e.join("")},m.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},m.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)-1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},m.prototype.diff_levenshtein=function(t){for(var e=0,n=0,r=0,i=0;i<t.length;i++){var o=t[i][0],a=t[i][1];switch(o){case 1:n+=a.length;break;case-1:r+=a.length;break;case 0:e+=Math.max(n,r),r=n=0}}return e+Math.max(n,r)},m.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case 1:e[n]="+"+encodeURI(t[n][1]);break;case-1:e[n]="-"+t[n][1].length;break;case 0:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},m.prototype.diff_fromDelta=function(t,e){for(var n=[],r=0,i=0,o=e.split(/\t/g),a=0;a<o.length;a++){var s=o[a].substring(1);switch(o[a].charAt(0)){case"+":try{n[r++]=[1,decodeURI(s)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+s)}break;case"-":case"=":var c=parseInt(s,10);if(isNaN(c)||c<0)throw new Error("Invalid number in diff_fromDelta: "+s);var u=t.substring(i,i+=c);"="==o[a].charAt(0)?n[r++]=[0,u]:n[r++]=[-1,u];break;default:if(o[a])throw new Error("Invalid diff operation in diff_fromDelta: "+o[a])}}if(i!=t.length)throw new Error("Delta length ("+i+") does not equal source text length ("+t.length+").");return n},m.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},m.prototype.match_bitap_=function(t,i,o){if(i.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var e=this.match_alphabet_(i),a=this;function n(t,e){var n=t/i.length,r=Math.abs(o-e);return a.Match_Distance?n+r/a.Match_Distance:r?1:n}var r=this.Match_Threshold,s=t.indexOf(i,o);-1!=s&&(r=Math.min(n(0,s),r),-1!=(s=t.lastIndexOf(i,o+i.length))&&(r=Math.min(n(0,s),r)));var c,u,l=1<<i.length-1;s=-1;for(var f,h=i.length+t.length,p=0;p<i.length;p++){for(c=0,u=h;c<u;)n(p,o+u)<=r?c=u:h=u,u=Math.floor((h-c)/2+c);h=u;var d=Math.max(1,o-u+1),g=Math.min(o+u,t.length)+i.length,m=Array(g+2);m[g+1]=(1<<p)-1;for(var v=g;d<=v;v--){var y=e[t.charAt(v-1)];if(m[v]=0===p?(m[v+1]<<1|1)&y:(m[v+1]<<1|1)&y|(f[v+1]|f[v])<<1|1|f[v+1],m[v]&l){var b=n(p,v-1);if(b<=r){if(r=b,!(o<(s=v-1)))break;d=Math.max(1,2*o-s)}}}if(n(p+1,o)>r)break;f=m}return s},m.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},m.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),r=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=e.substring(t.start2-r,t.start2+t.length1+r);r+=this.Patch_Margin;var i=e.substring(t.start2-r,t.start2);i&&t.diffs.unshift([0,i]);var o=e.substring(t.start2+t.length1,t.start2+t.length1+r);o&&t.diffs.push([0,o]),t.start1-=i.length,t.start2-=i.length,t.length1+=i.length+o.length,t.length2+=i.length+o.length}},m.prototype.patch_make=function(t,e,n){var r,i;if("string"==typeof t&&"string"==typeof e&&void 0===n)r=t,2<(i=this.diff_main(r,e,!0)).length&&(this.diff_cleanupSemantic(i),this.diff_cleanupEfficiency(i));else if(t&&"object"==typeof t&&void 0===e&&void 0===n)i=t,r=this.diff_text1(i);else if("string"==typeof t&&e&&"object"==typeof e&&void 0===n)r=t,i=e;else{if("string"!=typeof t||"string"!=typeof e||!n||"object"!=typeof n)throw new Error("Unknown call format to patch_make.");r=t,i=n}if(0===i.length)return[];for(var o=[],a=new m.patch_obj,s=0,c=0,u=0,l=r,f=r,h=0;h<i.length;h++){var p=i[h][0],d=i[h][1];switch(s||0===p||(a.start1=c,a.start2=u),p){case 1:a.diffs[s++]=i[h],a.length2+=d.length,f=f.substring(0,u)+d+f.substring(u);break;case-1:a.length1+=d.length,a.diffs[s++]=i[h],f=f.substring(0,u)+f.substring(u+d.length);break;case 0:d.length<=2*this.Patch_Margin&&s&&i.length!=h+1?(a.diffs[s++]=i[h],a.length1+=d.length,a.length2+=d.length):d.length>=2*this.Patch_Margin&&s&&(this.patch_addContext_(a,l),o.push(a),a=new m.patch_obj,s=0,l=f,c=u)}1!==p&&(c+=d.length),-1!==p&&(u+=d.length)}return s&&(this.patch_addContext_(a,l),o.push(a)),o},m.prototype.patch_deepCopy=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i=new m.patch_obj;i.diffs=[];for(var o=0;o<r.diffs.length;o++)i.diffs[o]=r.diffs[o].slice();i.start1=r.start1,i.start2=r.start2,i.length1=r.length1,i.length2=r.length2,e[n]=i}return e},m.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var r=0,i=[],o=0;o<t.length;o++){var a,s,c=t[o].start2+r,u=this.diff_text1(t[o].diffs),l=-1;if(u.length>this.Match_MaxBits?-1!=(a=this.match_main(e,u.substring(0,this.Match_MaxBits),c))&&(-1==(l=this.match_main(e,u.substring(u.length-this.Match_MaxBits),c+u.length-this.Match_MaxBits))||l<=a)&&(a=-1):a=this.match_main(e,u,c),-1==a)i[o]=!1,r-=t[o].length2-t[o].length1;else if(i[o]=!0,r=a-c,u==(s=-1==l?e.substring(a,a+u.length):e.substring(a,l+this.Match_MaxBits)))e=e.substring(0,a)+this.diff_text2(t[o].diffs)+e.substring(a+u.length);else{var f=this.diff_main(u,s,!1);if(u.length>this.Match_MaxBits&&this.diff_levenshtein(f)/u.length>this.Patch_DeleteThreshold)i[o]=!1;else{this.diff_cleanupSemanticLossless(f);for(var h,p=0,d=0;d<t[o].diffs.length;d++){var g=t[o].diffs[d];0!==g[0]&&(h=this.diff_xIndex(f,p)),1===g[0]?e=e.substring(0,a+h)+g[1]+e.substring(a+h):-1===g[0]&&(e=e.substring(0,a+h)+e.substring(a+this.diff_xIndex(f,p+g[1].length))),-1!==g[0]&&(p+=g[1].length)}}}}return[e=e.substring(n.length,e.length-n.length),i]},m.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",r=1;r<=e;r++)n+=String.fromCharCode(r);for(r=0;r<t.length;r++)t[r].start1+=e,t[r].start2+=e;var i=t[0],o=i.diffs;if(0==o.length||0!=o[0][0])o.unshift([0,n]),i.start1-=e,i.start2-=e,i.length1+=e,i.length2+=e;else if(e>o[0][1].length){var a=e-o[0][1].length;o[0][1]=n.substring(o[0][1].length)+o[0][1],i.start1-=a,i.start2-=a,i.length1+=a,i.length2+=a}return 0==(o=(i=t[t.length-1]).diffs).length||0!=o[o.length-1][0]?(o.push([0,n]),i.length1+=e,i.length2+=e):e>o[o.length-1][1].length&&(a=e-o[o.length-1][1].length,o[o.length-1][1]+=n.substring(0,a),i.length1+=a,i.length2+=a),n},m.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,n=0;n<t.length;n++)if(!(t[n].length1<=e)){var r=t[n];t.splice(n--,1);for(var i=r.start1,o=r.start2,a="";0!==r.diffs.length;){var s=new m.patch_obj,c=!0;for(s.start1=i-a.length,s.start2=o-a.length,""!==a&&(s.length1=s.length2=a.length,s.diffs.push([0,a]));0!==r.diffs.length&&s.length1<e-this.Patch_Margin;){var u=r.diffs[0][0],l=r.diffs[0][1];1===u?(s.length2+=l.length,o+=l.length,s.diffs.push(r.diffs.shift()),c=!1):-1===u&&1==s.diffs.length&&0==s.diffs[0][0]&&l.length>2*e?(s.length1+=l.length,i+=l.length,c=!1,s.diffs.push([u,l]),r.diffs.shift()):(l=l.substring(0,e-s.length1-this.Patch_Margin),s.length1+=l.length,i+=l.length,0===u?(s.length2+=l.length,o+=l.length):c=!1,s.diffs.push([u,l]),l==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(l.length))}a=(a=this.diff_text2(s.diffs)).substring(a.length-this.Patch_Margin);var f=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);""!==f&&(s.length1+=f.length,s.length2+=f.length,0!==s.diffs.length&&0===s.diffs[s.diffs.length-1][0]?s.diffs[s.diffs.length-1][1]+=f:s.diffs.push([0,f])),c||t.splice(++n,0,s)}}},m.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},m.prototype.patch_fromText=function(t){var e=[];if(!t)return e;for(var n=t.split("\n"),r=0,i=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<n.length;){var o=n[r].match(i);if(!o)throw new Error("Invalid patch string: "+n[r]);var a=new m.patch_obj;for(e.push(a),a.start1=parseInt(o[1],10),""===o[2]?(a.start1--,a.length1=1):"0"==o[2]?a.length1=0:(a.start1--,a.length1=parseInt(o[2],10)),a.start2=parseInt(o[3],10),""===o[4]?(a.start2--,a.length2=1):"0"==o[4]?a.length2=0:(a.start2--,a.length2=parseInt(o[4],10)),r++;r<n.length;){var s=n[r].charAt(0);try{var c=decodeURI(n[r].substring(1))}catch(t){throw new Error("Illegal escape in patch_fromText: "+c)}if("-"==s)a.diffs.push([-1,c]);else if("+"==s)a.diffs.push([1,c]);else if(" "==s)a.diffs.push([0,c]);else{if("@"==s)break;if(""!==s)throw new Error('Invalid patch mode "'+s+'" in: '+c)}r++}}return e},(m.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:t="+";break;case-1:t="-";break;case 0:t=" "}e[n+1]=t+encodeURI(this.diffs[n][1])+"\n"}return e.join("").replace(/%20/g," ")},"undefined"!=typeof self&&self,void 0===(i="function"==typeof(r=function(){return function(){var t,n=[],s={ON_CHANGE:"s",ON_ADD:"a",ON_COMMIT:"c",ON_CHECKOUT:"co"},c={i:0,commits:{},stage:[],working:[],head:null},o=function(){return t||(t=new m)},u=function(t){return JSON.parse(JSON.stringify(t))},l=function(t){return JSON.stringify(t)},r=function(t){return JSON.parse(t)},f=function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=(r||s.log())[e];if(!i)throw new Error('There is no commit with hash "'.concat(e,'".'));return null===i.parent?n.reduce(function(t,e){return n=t,r=e,(i=o()).patch_apply(i.patch_fromText(r),n).shift();var n,r,i},i.files):t(i.parent,[i.files].concat(n),r)},h=function(t,e){var n=o(),r=n.diff_main(t,e,!0);return 2<r.length&&n.diff_cleanupSemantic(r),n.patch_toText(n.patch_make(t,e,r))},a=function(t,e){return decodeURI(h(f(e),t))},p=function(e){return n.forEach(function(t){return t(e)})},e=function(i){return{length:function(){return i.length},save:function(t,e){!function(t,e){if(!t)throw new Error("`filepath` is required.");if(!e)throw new Error("`file` object is required.");if("string"!=typeof t)throw new Error("`filepath` must be a string.");if("object"!==v(e))throw new Error("`file` must be an object.")}(t,e);for(var n=0,r=this.length();n<r;){if(i[n][0]===t)return i[n][1]=Object.assign({},i[n][1],e);n++}i.push([t,e])},saveAll:function(t){for(var e=0,n=this.length();e<n;)i[e][1]=Object.assign({},i[e][1],t),e++},get:function(t){for(var e=0,n=this.length();e<n;){if(i[e][0]===t)return i[e][1];e++}},del:function(t){for(var e=0,n=this.length();e<n;){if(i[e][0]===t||i[e][1]===t)return void i.splice(e,1);e++}throw new Error("There is no file with path ".concat(t,"."))},getKey:function(t){for(var e=0,n=this.length();e<n;){if(i[e][1]===t)return i[e][0];e++}},rename:function(t,e){for(var n=0,r=this.length();n<r;){if(i[n][0]===t)return i[n][0]=e;n++}throw new Error("There is no file with path ".concat(key,"."))},clone:function(){return u(i)},replaceStorage:function(t){i=t}}},i=function(t){return o().patch_fromText(t).reduce(function(t,e){return e.diffs?t+=e.diffs.reduce(function(t,e){var n=e[1].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"&para;<br />");return 1===e[0]&&(t+="<ins>"+n+"</ins>"),-1===e[0]&&(t+="<del>"+n+"</del>"),0===e[0]&&(t+="<span>"+n+"</span>"),t},""):t},"")},d=e(c.working),g=e(c.stage);return s.save=function(e,t){return"object"===v(e)&&void 0===t?(Object.keys(e).forEach(function(t){return d.save(t,e[t])}),p(s.ON_CHANGE),c):(d.save(e,t),p(s.ON_CHANGE),t)},s.saveAll=function(t){return d.saveAll(t),p(s.ON_CHANGE),c},s.del=function(t){return d.del(t),p(s.ON_CHANGE),c},s.rename=function(t,e){return d.rename(t,e),p(s.ON_CHANGE),c.working},s.get=function(t){return d.get(t)},s.exists=function(t){return!!d.get(t)},s.getAll=function(){return c.working},s.getFilepath=function(t){return d.getKey(t)},s.add=function(t){if(void 0===t)g.replaceStorage(c.stage=d.clone());else{var e=d.get(t);if(!e)throw new Error("There is no '".concat(t,"' in the working directory."));g.save(t,u(e))}return p(s.ON_ADD),c},s.commit=function(t,e){if(0===g.length())throw new Error("NOTHING_TO_COMMIT");var n="_"+ ++c.i,r=this.head(),i=null!==r?a(l(c.stage),r):l(c.stage);return c.commits[n]={message:t,parent:r,files:i},e&&(c.commits[n].meta=e),c.head=n,g.replaceStorage(c.stage=[]),p(s.ON_COMMIT),n},s.amend=function(t,e,n){var r=this.log()[t];if(!r)throw new Error('There is no commit with hash "'.concat(t,'".'));return r.message=e,n&&(r.meta=n),p(s.ON_COMMIT),r},s.show=function(t){t=t||this.head();var e=s.log()[t];if(!e)throw new Error('There is no commit with hash "'.concat(t,'".'));var n=u(e);return n.files=r(f(t)),n},s.checkout=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(0<g.length()&&!e)throw new Error("UNCOMMITED_CHANGES");if(""!==a(l(c.working),this.head())&&!e)throw new Error("UNSTAGED_FILES");return void 0===t&&(t=this.head()),c.head=t,d.replaceStorage(c.working=r(f(t))),p(s.ON_CHECKOUT),c},s.staged=function(){return g},s.head=function(){return c.head},s.log=function(){return c.commits},s.logAsTree=function(){var r=u(c.commits);return function t(e){if(!e)return null;var n=r[e];return delete r[e],n.hash=e,n.derivatives=Object.keys(r).filter(function(t){return r[t].parent===e}).map(t),n}(Object.keys(r).find(function(t){return null===r[t].parent}))},s.adios=function(i){var o=u(this.log()),t=Object.keys(o);if(0!==t.length){var a=o[i].parent;t.forEach(function(t){return o[t].files=r(f(t))});var e,n=o[i];return delete o[i],(t=Object.keys(o)).reduce(function(t,e,n){if(0===n)t=o[e].files,o[e].files=l(o[e].files);else{var r=o[e].files;o[e].files=decodeURI(h(l(t),l(o[e].files))),t=r}return o[e].parent===i&&(o[e].parent=a),t},null),this.head()===i&&(e=o,0===Object.keys(e).length&&e.constructor===Object?c.head=null:this.checkout(null===a?Object.keys(o).shift():a)),c.commits=o,p(s.ON_COMMIT),n}},s.diff=function(){var t=a(l(c.working),this.head());return""===t?null:{text:t,html:i(t)}},s.export=function(){return c},s.listen=function(t){n.push(t)},s.import=function(t){return(c=t).head||(c.head=null),c.i||(c.i=c.head?parseInt(c.head.replace("_","")):0),c.stage||(c.stage=[]),c.working||(c.working=[],this.checkout(this.head(),!0)),c.commits||(c.commits={}),d.replaceStorage(c.working),g.replaceStorage(c.stage),c},s.commitDiffToHTML=function(t){if(!c.commits[t])throw new Error("There is no commit with hash ".concat(t,"."));return-1===c.commits[t].files.indexOf("@@")?"":i(c.commits[t].files)},s.calcStrDiff=function(t,e){var n=h(t,e);return""===n?null:{text:n,html:i(n)}},s}})?r.apply(e,[]):r)||(t.exports=i)},function(t,e){function l(){return document.getElementById("svg-canvas")}function f(t,e,n,r){var i=l(),o=document.createElementNS("http://www.w3.org/2000/svg","circle");o.setAttributeNS(null,"cx",t),o.setAttributeNS(null,"cy",e),o.setAttributeNS(null,"r",n),o.setAttributeNS(null,"fill",r),i.appendChild(o)}t.exports={connectCommits:function(t,e,n){var r,i,o,a,s,c,u;f(t,e,3,"#999"),f(t,n,3,"#999"),i=e,o=r=t,a=n,s=l(),c=document.createElementNS("http://www.w3.org/2000/svg","path"),u="M "+r+" "+i+" C 40 "+(i+15)+" "+(o+15)+" "+a+" "+o+" "+a,c.setAttributeNS(null,"d",u),c.setAttributeNS(null,"fill","none"),c.setAttributeNS(null,"stroke","#999"),s.appendChild(c)},empty:function(){for(var t=l();t.firstChild;)t.removeChild(t.firstChild)}}},function(t){t.exports={name:"demoit",version:"6.0.1",description:"A live coding tool",main:"index.js",repository:{type:"git",url:"git+https://github.com/krasimir/demoit.git"},scripts:{clean:"rm -rf ./dist/*","copy-sw":"node ./scripts/copy-sw.js","copy-static":"cp ./src/index.html ./dist/index.html && yarn copy-sw && cp -r ./src/resources ./dist && cp -r ./src/img ./dist && cp -r ./src/font ./dist","produce-minified-js":"cat ./src/js-vendor/split.js ./.tmp/demoit.js | uglifyjs -c -m -o ./dist/demoit.js","produce-js":"cat ./src/js-vendor/split.js ./.tmp/demoit.js > ./dist/demoit.js","produce-css":"cat ./src/css/font.css ./src/css/codemirror.css ./src/css/la.css ./src/css/styles.css ./src/css/light_theme.css ./src/css/dark_theme.css | uglifycss > ./dist/styles.css","produce-editor-js":"cat ./src/js-vendor/codemirror.js ./src/js-vendor/javascript.js ./src/js-vendor/xml.js ./src/js-vendor/jsx.js ./src/js-vendor/mark-selection.js ./src/js-vendor/comment.js ./src/js-vendor/search_cursor.js ./src/js-vendor/markdown.js ./src/js-vendor/css.js ./src/js-vendor/htmlmixed.js ./src/js-vendor/babel-6.26.0.min.js ./src/js-vendor/babel-polyfill@6.26.0.js ./src/js-vendor/babel-plugin-transform-es2015-modules-commonjs@6.26.2.js | uglifyjs -c -m -o ./dist/resources/editor.js",dev:'yarn build && concurrently "webpack" "onchange ./src/css/*.css -- yarn produce-css" "onchange ./.tmp/*.js -- yarn produce-js" "cpx ./src/index.html ./dist/ -w" "cpx ./src/sw.js ./dist/ -w"',build:"yarn clean && yarn copy-static && yarn produce-css && yarn produce-editor-js && webpack --config ./webpack.config.prod.js && yarn produce-minified-js",zip:"node ./scripts/zipit.js",release:"yarn test && yarn build && yarn zip",test:"jest","test-watch":"jest --watch --verbose false",lint:"./node_modules/.bin/eslint --ext .js src/js"},keywords:["demo","code","live","coding"],author:"Krasimir Tsonev",license:"MIT",bugs:{url:"https://github.com/krasimir/demoit/issues"},homepage:"https://github.com/krasimir/demoit#readme",devDependencies:{"@babel/core":"7.1.5","@babel/plugin-transform-runtime":"7.1.0","@babel/preset-env":"7.1.5","@babel/runtime":"7.1.5","babel-core":"^7.0.0-bridge.0","babel-jest":"23.6.0","babel-loader":"8.0.4","babel-eslint":"8.0.3","clean-css-cli":"4.2.1",concurrently:"4.0.1",cpx:"1.5.0",jest:"23.6.0",onchange:"5.1.3","regenerator-runtime":"0.13.1","uglify-js":"3.4.9",uglifycss:"0.0.29",webpack:"4.25.1","webpack-cli":"3.1.2","zip-folder":"1.0.0",eslint:"4.12.1"},dependencies:{gitfred:"5.3.1",hashids:"1.2.2",jszip:"3.1.5","layout-architect":"3.0.0"}}},function(t,e,n){"use strict";var r,i;"undefined"!=typeof self&&self,void 0===(i="function"==typeof(r=function(){return function(t,n,r){if(!t)throw new Error("Please provide a HTML element as first argument!");if(!n)throw new Error("Please provide a list of strings as a second argument!");var s,i=function(t){return document.createElement(t)},o=function(t,e,n){return t.setAttribute(e,n)},c=function(){var t=n.slice();if(!r)return t;var e=function e(n,t){return 0===t.elements.length?n.push(t.name):t.elements.forEach(function(t){return e(n,t)}),n}([],r);return t.filter(function(t){return-1===e.indexOf(t)})}(),e=i("DIV"),a=[],u=r||null;function l(t){return{name:t,elements:[]}}function f(e,t,n,r){return t.map(function(t){var e=i("A");return o(e,"data-op",t[0]),o(e,"href","javascript:void(0);"),o(e,"class",t[2]),e.innerHTML=t[1],e.item=n,e.parent=r,e}).forEach(function(t){return e.appendChild(t)})}function h(){var n;return p((n=i("DIV"),c.forEach(function(t){var e=i("A");o(e,"href","javascript:void(0);"),o(e,"data-op","select"),e.item=t,e.innerHTML='<svg width="10" height="10" viewBox="0 0 1792 1792"><path d="M1600 736v192q0 40-28 68t-68 28h-416v416q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-416h-416q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h416v-416q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z"/></svg> '+t,n.appendChild(e)}),o(n,"class","la-selector"),n)),new Promise(function(n){s=function(t){var e=c.indexOf(t);-1<e&&c.splice(e,1),n(t)}})}function p(t){for(t=t||function e(n,t){var r=i("DIV");return o(r,"class","la-block"),0===n.elements.length?(r.innerHTML='<div class="la-name">'+n.name+"</div>",f(r,[["remove",'<svg width="14" height="14" viewBox="0 0 1792 1792"><path d="M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"/></svg>',"la-remove"]],n,t)):(r.innerHTML='<div class="la-children" style="grid-template-'+("vertical"===n.direction?"rows":"columns")+": repeat("+n.elements.length+', 1fr);"></div>',n.elements.forEach(function(t){return r.querySelector(".la-children").appendChild(e(t,n))})),f(r,[["horizontal:left","","la-left"],["vertical:top","","la-top"],["vertical:bottom","","la-bottom"],["horizontal:right","","la-right"]],n,t),r}(u);e.firstChild;)e.removeChild(e.firstChild);e.appendChild(t)}function d(){a.forEach(function(t){return t(u)})}function g(){h().then(function(t){u=l(t),p(),d()})}return o(e,"class","la"),e.addEventListener("click",function(t){var n,r,i,e=t.target.getAttribute("data-op"),o=t.target.item,a=t.target.parent;if(e&&o)if("remove"===e)!function(t,e){if(!t)return u=null,-1===c.indexOf(e.name)&&c.push(e.name);var n=t.elements.findIndex(function(t){return t===e});-1<n&&(t.elements.splice(n,1),1===t.elements.length&&(0<t.elements[0].elements.length?(t.direction=t.elements[0].direction,t.elements=t.elements[0].elements):(t.name=t.elements[0].name,t.elements=[],delete t.direction)),c.push(e.name))}(a,o),u?p():g(),d();else if("select"===e)s(o);else{if(0===c.length)return;e=e.split(":"),(n=o,r=e[0],i="right"===e[1]||"bottom"===e[1]?"after":"before",h().then(function(t){return l(t)}).then(function(t){if(0===n.elements.length)n.direction=r,n.elements="after"===i?[l(n.name),t]:[t,l(n.name)],delete n.name;else{if(n.direction!==r){var e={direction:n.direction,elements:n.elements};n.elements="after"===i?[e,t]:[t,e]}else"after"===i?n.elements.push(t):n.elements=[t].concat(n.elements);n.direction=r}})).then(function(){p(),d()})}}),u?p():g(),t.appendChild(e),{onChange:function(t){a.push(t)},change:function(t){u=t,p()},get:function(){return u}}}})?r.apply(e,[]):r)||(t.exports=i)},function(t,e,n){var o=n(4)(),a=function(t){return t.reduce(function(t,e){return t[e[0]]=e[1].c,t},{})};t.exports=function(t,e){var n=[],r=a(t),i=a(e);return Object.keys(r).forEach(function(e){if(i[e]){var t=o.calcStrDiff(r[e],i[e]);null!==t&&n.push(["E",e,t])}else n.push(["D",e,r[e]]),Object.keys(i).forEach(function(t){r[e]===i[t]&&(n.push(["R",e,t]),delete i[t])})}),Object.keys(i).forEach(function(t){r[t]||n.push(["N",t,i[t]])}),n}},function(t,e,n){t.exports=n(16)},function(t,e,n){var r=function(){return this||"object"==typeof self&&self}()||Function("return this")(),i=r.regeneratorRuntime&&0<=Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime"),o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(11),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},function(T,t){!function(t){"use strict";var c,e=Object.prototype,u=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag",a="object"==typeof T,s=t.regeneratorRuntime;if(s)a&&(T.exports=s);else{(s=t.regeneratorRuntime=a?T.exports:{}).wrap=b;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",g={},l={};l[i]=function(){return this};var m=Object.getPrototypeOf,v=m&&m(m(O([])));v&&v!==e&&u.call(v,i)&&(l=v);var y=k.prototype=x.prototype=Object.create(l);_.prototype=y.constructor=k,k.constructor=_,k[o]=_.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,o in t||(t[o]="GeneratorFunction")),t.prototype=Object.create(y),t},s.awrap=function(t){return{__await:t}},C(E.prototype),E.prototype[r]=function(){return this},s.AsyncIterator=E,s.async=function(t,e,n,r){var i=new E(b(t,e,n,r));return s.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},C(y),y[o]="Generator",y[i]=function(){return this},y.toString=function(){return"[object Generator]"},s.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},s.values=O,q.prototype={constructor:q,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(M),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=c),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=u.call(i,"catchLoc"),s=u.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=c),g}}}function b(t,e,n,r){var o,a,s,c,i=e&&e.prototype instanceof x?e:x,u=Object.create(i.prototype),l=new q(r||[]);return u._invoke=(o=t,a=n,s=l,c=f,function(t,e){if(c===p)throw new Error("Generator is already running");if(c===d){if("throw"===t)throw e;return A()}for(s.method=t,s.arg=e;;){var n=s.delegate;if(n){var r=S(n,s);if(r){if(r===g)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(c===f)throw c=d,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);c=p;var i=w(o,a,s);if("normal"===i.type){if(c=s.done?d:h,i.arg===g)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(c=d,s.method="throw",s.arg=i.arg)}}),u}function w(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function x(){}function _(){}function k(){}function C(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function E(c){var e;this._invoke=function(n,r){function t(){return new Promise(function(t,e){!function e(t,n,r,i){var o=w(c[t],c,n);if("throw"!==o.type){var a=o.arg,s=a.value;return s&&"object"==typeof s&&u.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):Promise.resolve(s).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,i)})}i(o.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function S(t,e){var n=t.iterator[e.method];if(n===c){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=c,S(t,e),"throw"===e.method))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=w(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,g;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=c),e.delegate=null,g):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(u.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=c,t.done=!0,t};return r.next=r}}return{next:A}}function A(){return{value:c,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){"use strict";n.r(e);var r=n(0),v=n.n(r),i=n(1),y=n.n(i),o=n(6),u=[];function S(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=[],o="string"==typeof t?e.querySelector(t):t,a=!0;if(!o){if(a=!1,!n)throw new Error('Ops! There is no DOM element matching "'.concat(t,'" selector.'));o=document.createElement("div")}var s=function(t,e){o.addEventListener(t,e);var n=function(){return o.removeEventListener(t,e)};return i.push(n),n},c={e:o,found:function(){return a},content:function(t){return t?(i.forEach(function(t){return t()}),o.innerHTML=t,this.exports()):o.innerHTML},appendChild:function(t){return o.appendChild(t),this},appendChildren:function(t){return t.forEach(function(t){return o.appendChild(t.e)}),this},css:function(t,e){return void 0!==e?(o.style[t]=e,this):o.style[t]},clearCSS:function(){return o.style={},this},prop:function(t,e){return void 0!==e?(o[t]=e,this):o[t]},attr:function(t,e){return void 0!==e?(o.setAttribute(t,e),this):o.getAttribute(t)},onClick:function(t){return s("click",t)},onKeyUp:function(t){return s("keyup",t)},onKeyDown:function(t){return s("keydown",t)},onMouseOver:function(t){return s("mouseover",t)},onMouseOut:function(t){return s("mouseout",t)},onMouseUp:function(t){return s("mouseup",t)},onRightClick:function(e){var t=function(t){t.preventDefault(),e()};o.addEventListener("contextmenu",t);var n=function(){return o.removeEventListener("oncontextmenu",t)};return i.push(n),n},onChange:function(t){o.addEventListener("change",function(){return t(o.value)});var e=function(){return o.removeEventListener("change",t)};return i.push(e),e},find:function(t){return S(t,o)},appendTo:function(t){t.e.appendChild(o)},exports:function(){return Array.prototype.slice.call(o.querySelectorAll("[data-export]")).map(function(t){return S(t,o)})},namedExports:function(){return this.exports().reduce(function(t,e){return t[e.attr("data-export")]=e,t},{})},detach:function(){o.parentNode&&o.parentNode.contains(o)&&o.parentNode.removeChild(o)},empty:function(){for(;o.firstChild;)o.removeChild(o.firstChild);return this},destroy:function(){i.forEach(function(t){return t()}),r||(this.empty(),this.detach())},scrollToBottom:function(){o.scrollTop=o.scrollHeight},selectOnClick:function(){var t=this.onClick(function(){o.select(),t()})}};return u.push(c),c}S.fromString=function(t){var e=document.createElement("div");e.innerHTML=t;var n=Array.prototype.slice.call(e.childNodes).filter(function(t){return 1===t.nodeType});if(0<n.length)return S(n[0]);throw new Error("fromString accepts HTMl with a single parent.")},S.wrap=function(t){return S(document.createElement("div")).appendChildren(t)},S.fromTemplate=function(t){return S.fromString(document.querySelector(t).innerHTML)},S.withFallback=function(t){return S(t,document,!0)},S.withRelaxedCleanup=function(t){return S(t,document,!1,!0)},S.destroy=function(){u.forEach(function(t){return t.destroy()}),u=[]};var b=["editor","HTML","console","story"],w={elements:[{name:"editor",elements:[]},{elements:[{name:"HTML",elements:[]},{name:"console",elements:[]}],direction:"horizontal"}],direction:"vertical"},c=function(a){var t,e=S.withRelaxedCleanup(".app .layout");t=a.getEditorSettings().theme,S.withRelaxedCleanup(".app").attr("class","app "+t);var s,c=function n(r){return"string"==typeof r?("output"===r&&(r="HTML"),"log"===r&&(r="console"),{name:r,elements:[]}):(0<r.elements.length&&r.elements.forEach(function(t,e){return r.elements[e]=n(t)}),r)}(a.getEditorSettings().layout||w),u={HTML:S.fromTemplate("#template-html"),console:S.fromTemplate("#template-console"),editor:S.fromTemplate("#template-editor"),story:S.fromTemplate("#template-story")},l=[];e.empty().appendChildren(function n(e){var r=e.direction,t=e.elements,i=e.sizes,o=t.map(function(t){if(0<t.elements.length){var e=S.wrap(n(t));return e.attr("class","editor-section"),e}return u[t.name]});return l.push(function(){return{b:e,split:Split(o.map(function(t){return t.e}),{sizes:i||(t=o,t.map(function(){return 100/t.length})),gutterSize:2,direction:r,onDragEnd:function(){s.forEach(function(t){var e=t.b,n=t.split;e.sizes=n.getSizes()}),a.updateLayout(c)}})};var t}),"horizontal"===r&&o.map(function(t){return t.css("float","left")}),o}({elements:[c]})),setTimeout(function(){return s=l.map(function(t){return t()})},1)},a=n(2),k=n.n(a),s={presets:["react",["es2015",{modules:!1}],"es2016","es2017","stage-0","stage-1","stage-2","stage-3"],plugins:["transform-es2015-modules-commonjs"]};function l(t){return Babel.transform(t,s).code}var f={},h=function(t){return t.replace(/\./g,"_")},p=function(t){var e=document.querySelector("#"+h(t));e&&(e.parentNode.removeChild(e),delete f[t])};window.cleanUpExecutedCSS=p,window.executeCSS=function(t,e){if(f[t])f[t].innerHTML=e;else{var n=document.createElement("style");n.setAttribute("id",h(t)),n.innerHTML=e,document.body.appendChild(n),f[t]=n}},window.executeHTML=function(t,e){var n=document.createElement("div");n.innerHTML=e,S(".output").empty().appendChild(n.firstChild)};var d=function(t,e){var n=(t||"").split(/\./).pop().toLowerCase();return"css"===n?e='window.executeCSS("'.concat(t,'", ').concat(JSON.stringify(e),");"):"html"===n&&(e='window.executeHTML("'.concat(t,'", ').concat(JSON.stringify(e),");")),{filename:t,content:e}},g=function(t){var e=t.filename,n=t.content;return'\n  {\n    filename: "'.concat(e,'",\n    func: function (require, exports) {\n      ').concat(l(n),"\n    },\n    exports: {}\n  }\n")};function m(e,t){var i=[],o=0;try{var a=t.findIndex(function(t){return k()(t,1)[0]===e});t.forEach(function(t){var e=k()(t,2),n=e[0],r=e[1];i.push(g(d(n,r.c))),!0===r.en&&(a=o),o+=1});var n=l("\n      const cleanUpCSS = function() {\n        modules.forEach(function (module) {\n          if (module.filename.split('.').pop().toLowerCase() === 'css' && imported.indexOf(module.filename) === -1) {\n            cleanUpExecutedCSS(module.filename);\n          }\n        });\n      }\n      const imported = [];\n      const modules = [".concat(i.join(","),"];\n      const require = function(file) {\n        const module = modules.find(({ filename }) => filename === file);\n\n        if (!module) {\n          throw new Error('Demoit can not find \"' + file + '\" file.');\n        }\n        imported.push(file);\n        module.func(require, module.exports);\n        return module.exports;\n      };\n\n      modules[index].func(require, modules[index].exports);\n      cleanUpCSS();\n    "));return new Function("index",n)(a),n}catch(e){console.error(e)}}function x(){var e,r,i,o,a,s=S.withFallback(".console"),c=!0,u=function(t){var e=document.createElement("div"),n=t?t.toString().replace(/[&<>"']/g,function(t){return"&"+{"&":"amp","<":"lt",">":"gt",'"':"quot","'":"#39"}[t]+";"}):t;e.innerHTML="<p>"+n+"</p>",c&&(s.empty(),c=!1),s.appendChild(e),s.scrollToBottom()};return e=console.error,r=console.log,i=console.warn,o=console.info,a=console.clear,console.error=function(t){u(t.stack),e.apply(console,arguments)},console.log=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(u),r.apply(console,e)},console.warn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(u),i.apply(console,e)},console.info=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(u),o.apply(console,e)},console.clear=function(){s.content("");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];a.apply(console,e)},function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'<div class="centered"><div>console.log(...)</div></div>';c=!0,s.empty().content(t)}}function _(){var t,r=S.withFallback(".output");return t=y()(v.a.mark(function t(){var e,n=arguments;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=0<n.length&&void 0!==n[0]?n[0]:'<div class="centered">&lt;div id="output" /&gt;</div>',"undefined"!=typeof ReactDOM&&ReactDOM.unmountComponentAtNode(r.e),r.content(e);case 3:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)}}var C,E={},j=function(t,e){if(E[t])return e();E[t]=!1;var n=document.createElement("script");n.src=t,n.addEventListener("load",function(){E[t]=!0,e()}),document.body.appendChild(n)},M=function(t,e){if(E[t])return e();E[t]=!1;var n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",t),n.addEventListener("load",function(){E[t]=!0,e()}),document.body.appendChild(n)},q=(C=y()(v.a.mark(function t(o){var a,e=arguments;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=1<e.length&&void 0!==e[1]?e[1]:function(){},t.abrupt("return",new Promise(function(i){!function t(e){if(e!==o.length){a(Math.ceil(e/o.length*100),o[e].split(/\//).pop());var n=o[e],r=n.split(".").pop().toLowerCase();"js"===r?j(n,function(){return t(e+1)}):"css"===r?M(n,function(){return t(e+1)}):t(e+1)}else i()}(0)}));case 2:case"end":return t.stop()}},t,this)})),function(t){return C.apply(this,arguments)}),O=function(){return E};function A(t,e){return T.apply(this,arguments)}function T(){return(T=y()(v.a.mark(function t(e,n){var r;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=(r=["./resources/editor.js"]).concat(e.getDependencies()),t.next=4,q(r,n);case 4:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}var z=function(u){var t=u.commands,l=u.Pos;t.selectNextOccurrence=function(t){var e=t.getCursor("from"),n=t.getCursor("to"),r=t.state.sublimeFindFullWord==t.doc.sel;if(0==u.cmpPos(e,n)){var i=wordAt(t,e);if(!i.word)return;t.setSelection(i.from,i.to),r=!0}else{var o=t.getRange(e,n),a=r?new RegExp("\\b"+o+"\\b"):o,s=t.getSearchCursor(a,n),c=s.findNext();if(c||(c=(s=t.getSearchCursor(a,l(t.firstLine(),0))).findNext()),!c||function(t,e,n){for(var r=0;r<t.length;r++)if(t[r].from()==e&&t[r].to()==n)return!0;return!1}(t.listSelections(),s.from(),s.to()))return u.Pass;t.addSelection(s.from(),s.to())}r&&(t.state.sublimeFindFullWord=t.doc.sel)},t.toggleCommentIndented=function(t){t.toggleComment({indent:!0})}},N="e_s";function I(t,e){return L.apply(this,arguments)}function L(){return(L=y()(v.a.mark(function t(n,r){var i,o,e,a,s,c,u,l,f;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return f=function(){return(f=y()(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o();case 2:i(),u.setValue(n.getActiveFileContent()),u.focus(),t.t0=n.getActiveFile().split(".").pop().toLowerCase(),t.next="css"===t.t0?8:"html"===t.t0?10:12;break;case 8:return u.setOption("mode","css"),t.abrupt("break",14);case 10:return u.setOption("mode","htmlmixed"),t.abrupt("break",14);case 12:return u.setOption("mode","jsx"),t.abrupt("break",14);case 14:n.pendingChanges(!1),a();case 16:case"end":return t.stop()}},t,this)}))).apply(this,arguments)},l=function(){return f.apply(this,arguments)},i=x(),o=_(),e=function(){var t=y()(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(n,function(t,e){var n='<div class="centered"><div class="spinner"></div></div>';i(n),o(n)});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),a=function(){var t=y()(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:i(),o(),m(n.getActiveFile(),n.getFiles());case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),s=function(){var e=y()(v.a.mark(function t(e){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o();case 2:i(),n.editFile(n.getActiveFile(),{c:e}),n.pendingChanges(!1),a();case 6:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),c=S.withFallback(".js-code-editor"),t.next=10,e();case 10:return u=D(c.empty(),n.getEditorSettings(),n.getActiveFileContent(),s,function(){n.pendingChanges(!0)},function(t){n.setActiveFileByIndex(t),l()},function(e){r.forEach(function(t){return t(N,e,u)})}),t.abrupt("return",{loadFileInEditor:l,save:function(){return s(u.getValue())}});case 12:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function D(t,e,n,r,i,o,a){z(CodeMirror);var s=CodeMirror(t.e,{value:n||"",mode:"jsx",tabSize:2,lineNumbers:!1,autofocus:!0,foldGutter:!1,gutters:[],styleSelectedText:!0,theme:e.theme}),c=function(){return r(s.getValue())};return s.on("change",function(){return i(s.getValue())}),s.setOption("extraKeys",{"Ctrl-S":c,"Cmd-S":c,"Cmd-1":function(){return o(0)},"Cmd-2":function(){return o(1)},"Cmd-3":function(){return o(2)},"Cmd-4":function(){return o(3)},"Cmd-5":function(){return o(4)},"Cmd-6":function(){return o(5)},"Cmd-7":function(){return o(6)},"Cmd-8":function(){return o(7)},"Cmd-9":function(){return o(8)},"Ctrl-1":function(){return o(0)},"Ctrl-2":function(){return o(1)},"Ctrl-3":function(){return o(2)},"Ctrl-4":function(){return o(3)},"Ctrl-5":function(){return o(4)},"Ctrl-6":function(){return o(5)},"Ctrl-7":function(){return o(6)},"Ctrl-8":function(){return o(7)},"Ctrl-9":function(){return o(8)},"Cmd-D":"selectNextOccurrence","Ctrl-D":"selectNextOccurrence","Cmd-/":"toggleCommentIndented","Ctrl-/":"toggleCommentIndented"}),CodeMirror.normalizeKeyMap(),s.focus(),t.onMouseUp(function(){var t=s.getSelection();""!==t&&a(t)}),s}var B,P=n(4),F=n.n(P),R=function(e,t){var n=t,r=[];return location.search.substr(1).split("&").forEach(function(t){(r=t.split("="))[0]===e&&(n=decodeURIComponent(r[1]))}),n},H=(B=y()(v.a.mark(function t(e){var n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t,this)})),function(t){return B.apply(this,arguments)}),U=function(t,e){var n=e.split("?")[0],r=e.split("#")[1],i=-1!==e.indexOf("?")?e.split("?")[1]:"",o=[];if(""===i)return n;for(var a=(o=i.split("&")).length-1;0<=a;a-=1)o[a].split("=")[0]===t&&o.splice(a,1);return[n,""!==(o=o.join("&"))?"?"+o:"",r?"#"+r:""].join("")},G=function(t){var e=window.location.href.split("#")[1];history.pushState(null,null,"/e/".concat(t).concat(e?"#"+e:""))},V=function(t){var e=t.split(".");if(1===e.length)return e[0]+".1";if(2===e.length)return"".concat(e[0],".1.").concat(e[1]);var n=e.pop(),r=e.pop();return isNaN(parseInt(r,10))?"".concat(e.join("."),".").concat(r,".1.").concat(n):"".concat(e.join("."),".").concat(parseInt(r,10)+1,".").concat(n)},J=function(t,e){return t.length>e?t.substr(0,e)+"...":t};function K(t){return window.location.href.match(t)}var Y,W,X=K(/^https:\/\/demoit.app/)||K(/^http:\/\/localhost:8004/),Z=K(/^http:\/\/localhost:8004/),$=Z?"http://localhost:8004/api/demo":"https://demoit.app/api/demo",Q=Z?"http://localhost:8004/api/profile":"https://demoit.app/api/profile",tt=!1,et={saveDemo:(W=y()(v.a.mark(function t(e,n){var r,i;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(tt)return t.abrupt("return");t.next=2;break;case 2:return t.prev=2,tt=!0,t.next=6,fetch($,{method:"POST",body:JSON.stringify({state:e}),headers:{token:n}});case 6:return r=t.sent,t.next=9,r.json();case 9:if(i=t.sent,tt=!1,!i.error){t.next=15;break}console.error(i.error),t.next=17;break;case 15:if(i.demoId)return t.abrupt("return",i.demoId);t.next=17;break;case 17:console.log(i),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(2),console.error(t.t0);case 23:case"end":return t.stop()}},t,this,[[2,20]])})),function(t,e){return W.apply(this,arguments)}),getDemos:(Y=y()(v.a.mark(function t(e,n){var r,i;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(Q+"/"+e,{headers:{token:n}});case 3:return r=t.sent,t.next=6,r.json();case 6:if(!(i=t.sent).error){t.next=11;break}console.error(i.error),t.next=16;break;case 11:if(i)return t.abrupt("return",i);t.next=15;break;case 15:console.log(i);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),console.error(t.t0);case 21:case"end":return t.stop()}},t,this,[[0,18]])})),function(t,e){return Y.apply(this,arguments)})},nt=function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(t){return!1}}(),rt=function(t,e){if(!nt)return null;void 0!==e&&localStorage.setItem(t,JSON.stringify(e));var n=localStorage.getItem(t);try{if(n)return JSON.parse(n)}catch(e){console.error("There is some data in the local storage under the ".concat(t," key. However, it is not a valid JSON."))}return null},it=F()(),ot="DEMOIT_PROFILE",at={name:"",desc:"",published:!1,editor:{theme:"light",statusBar:!1,layout:w},dependencies:[],files:{},story:[]},st=function(){return 0===it.getAll().length?"untitled.js":it.getAll()[0][0]},ct=function(){var t=location.hash.replace(/^#/,"");return""!==t&&it.get(t)?t:st()};function ut(){return(ut=y()(v.a.mark(function t(e){var n,i,r,o,a,s,c,u,l;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],i=function(){return n.forEach(function(t){return t()})},r=rt(ot),o=!1,a=window.state){t.next=20;break}if(s=R("state"))return t.prev=8,t.next=11,H(s);t.next=19;break;case 11:a=t.sent,t.next=17;break;case 14:t.prev=14,t.t0=t.catch(8),console.error("Error reading ".concat(s));case 17:t.next=20;break;case 19:a=at;case 20:return a.v=e,it.import(a.files),it.listen(function(t){t!==it.ON_COMMIT&&t!==it.ON_CHECKOUT||u(),i()}),c=ct(),u=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};if(X&&l.loggedIn()){if(t&&delete a.owner,!l.isDemoOwner())return;et.saveDemo(a,r.token).then(function(t){t&&t!==a.demoId&&(a.demoId=t,a.owner=r.id,G(t)),e()})}},l={getDemoId:function(){if(!a.demoId)throw new Error("There is no demoId!");return a.demoId},getActiveFile:function(){return c},getActiveFileContent:function(){return it.get(c).c},setActiveFile:function(t){return c=t,location.hash=t,i(),t},setActiveFileByIndex:function(t){var e=it.getAll()[t][0];e&&(this.setActiveFile(e),n.forEach(function(t){return t()}))},isCurrentFile:function(t){return c===t},isDemoOwner:function(){return a.owner&&r&&a.owner===r.id},getFiles:function(){return it.getAll()},getNumOfFiles:function(){return it.getAll().length},meta:function(t){if(t){var e=t.name,n=t.description,r=t.published;return a.name=e,a.desc=n,a.published=!!r,i(),u(),null}return{id:this.getDemoId(),name:a.name,description:a.desc,published:!!a.published}},getDependencies:function(){return a.dependencies},setDependencies:function(t){a.dependencies=t,u()},getEditorSettings:function(){return a.editor},editFile:function(t,e){it.save(t,e),u()},renameFile:function(t,e){c===t&&this.setActiveFile(e),it.rename(t,e),u()},addNewFile:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"untitled.js";t=it.get(t)?V(t):t,it.save(t,{c:""}),this.setActiveFile(t),u()},deleteFile:function(t){p(t),it.del(t),t===c&&this.setActiveFile(st()),u()},listen:function(t){n.push(t)},updateLayout:function(t){a.editor.layout=t},updateTheme:function(t){a.editor.theme=t,u()},updateStatusBarVisibility:function(t){a.editor.statusBar=t},setEntryPoint:function(t){var e=!it.get(t).en;it.saveAll({en:!1}),it.save(t,{en:e})},pendingChanges:function(t){return void 0!==t&&(o=t,i()),o},dump:function(){return a},isForkable:function(){return this.loggedIn()&&!!a.owner},fork:function(){u(!0,i)},loggedIn:function(){return null!==r},getProfile:function(){return r},getDemos:function(){return et.getDemos(r.id,r.token)},version:function(){return a.v},git:function(){return it}},t.abrupt("return",l);case 27:case"end":return t.stop()}},t,this,[[8,14]])}))).apply(this,arguments)}var lt=n(3),ft=n.n(lt),ht=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20;return'<svg width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 1792 1792"><path d="M704 1376v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm-544-992h448l-48-117q-7-9-17-11h-317q-10 2-17 11zm928 32v64q0 14-9 23t-23 9h-96v948q0 83-47 143.5t-113 60.5h-832q-66 0-113-58.5t-47-141.5v-952h-96q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h309l70-167q15-37 54-63t79-26h320q40 0 79 26t54 63l70 167h309q14 0 23 9t9 23z"/></svg>')},pt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20;return'<svg width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 1792 1792"><path d="M1671 566q0 40-28 68l-724 724-136 136q-28 28-68 28t-68-28l-136-136-362-362q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 295 656-657q28-28 68-28t68 28l136 136q28 28 28 68z"/></svg>')},dt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:24;return'<svg width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 1792 1792"><path d="M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"/></svg>')},gt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:24;return'<svg width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 1792 1792"><path d="M1600 736v192q0 40-28 68t-68 28h-416v416q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-416h-416q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h416v-416q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z"/></svg>')},mt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:24;return'<svg width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 1792 1792"><path d="M1152 896q0-106-75-181t-181-75-181 75-75 181 75 181 181 75 181-75 75-181zm512-109v222q0 12-8 23t-20 13l-185 28q-19 54-39 91 35 50 107 138 10 12 10 25t-9 23q-27 37-99 108t-94 71q-12 0-26-9l-138-108q-44 23-91 38-16 136-29 186-7 28-36 28h-222q-14 0-24.5-8.5t-11.5-21.5l-28-184q-49-16-90-37l-141 107q-10 9-25 9-14 0-25-11-126-114-165-168-7-10-7-23 0-12 8-23 15-21 51-66.5t54-70.5q-27-50-41-99l-183-27q-13-2-21-12.5t-8-23.5v-222q0-12 8-23t19-13l186-28q14-46 39-92-40-57-107-138-10-12-10-24 0-10 9-23 26-36 98.5-107.5t94.5-71.5q13 0 26 10l138 107q44-23 91-38 16-136 29-186 7-28 36-28h222q14 0 24.5 8.5t11.5 21.5l28 184q49 16 90 37l142-107q9-9 24-9 13 0 25 10 129 119 165 170 7 8 7 22 0 12-8 23-15 21-51 66.5t-54 70.5q26 50 41 98l183 28q13 2 21 12.5t8 23.5z"/></svg>')},vt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:24;return'<svg width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1152 896q0 106-75 181t-181 75-181-75-75-181 75-181 181-75 181 75 75 181zm-256-544q-148 0-273 73t-198 198-73 273 73 273 198 198 273 73 273-73 198-198 73-273-73-273-198-198-273-73zm768 544q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"/></svg>')},yt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:16,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:14;return'<svg width="'.concat(t,'" height="').concat(e,'" viewBox="0 0 2048 1792"><path d="M704 896q-159 0-271.5-112.5t-112.5-271.5 112.5-271.5 271.5-112.5 271.5 112.5 112.5 271.5-112.5 271.5-271.5 112.5zm1077 320l249 249q9 9 9 23 0 13-9 22l-136 136q-9 9-22 9-14 0-23-9l-249-249-249 249q-9 9-23 9-13 0-22-9l-136-136q-9-9-9-22 0-14 9-23l249-249-249-249q-9-9-9-23 0-13 9-22l136-136q9-9 22-9 14 0 23 9l249 249 249-249q9-9 23-9 13 0 22 9l136 136q9 9 9 22 0 14-9 23zm-498 0l-181 181q-37 37-37 91 0 53 37 90l83 83q-21 3-44 3h-874q-121 0-194-69t-73-190q0-53 3.5-103.5t14-109 26.5-108.5 43-97.5 62-81 85.5-53.5 111.5-20q19 0 39 17 154 122 319 122t319-122q20-17 39-17 28 0 57 6-28 27-41 50t-13 56q0 54 37 91z"/></svg>')},bt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:14;return'<svg width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 1792 1792"><path d="M672 1472q0-40-28-68t-68-28-68 28-28 68 28 68 68 28 68-28 28-68zm0-1152q0-40-28-68t-68-28-68 28-28 68 28 68 68 28 68-28 28-68zm640 128q0-40-28-68t-68-28-68 28-28 68 28 68 68 28 68-28 28-68zm96 0q0 52-26 96.5t-70 69.5q-2 287-226 414-67 38-203 81-128 40-169.5 71t-41.5 100v26q44 25 70 69.5t26 96.5q0 80-56 136t-136 56-136-56-56-136q0-52 26-96.5t70-69.5v-820q-44-25-70-69.5t-26-96.5q0-80 56-136t136-56 136 56 56 136q0 52-26 96.5t-70 69.5v497q54-26 154-57 55-17 87.5-29.5t70.5-31 59-39.5 40.5-51 28-69.5 8.5-91.5q-44-25-70-69.5t-26-96.5q0-80 56-136t136-56 136 56 56 136z"/></svg>')},wt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:14;return'<svg width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 1792 1792" ><path d="M1472 989v259q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h255q13 0 22.5 9.5t9.5 22.5q0 27-26 32-77 26-133 60-10 4-16 4h-112q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-214q0-19 18-29 28-13 54-37 16-16 35-8 21 9 21 29zm237-496l-384 384q-18 19-45 19-12 0-25-5-39-17-39-59v-192h-160q-323 0-438 131-119 137-74 473 3 23-20 34-8 2-12 2-16 0-26-13-10-14-21-31t-39.5-68.5-49.5-99.5-38.5-114-17.5-122q0-49 3.5-91t14-90 28-88 47-81.5 68.5-74 94.5-61.5 124.5-48.5 159.5-30.5 196.5-11h160v-192q0-42 39-59 13-5 25-5 26 0 45 19l384 384q19 19 19 45t-19 45z"/></svg>')},xt=27,_t=function(t){var e=t.title,n=t.content;return"<section>\n  <h2>".concat(e,'</h2>\n  <button class="close" data-export="close"><svg width="20" height="20" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"/></svg></button>\n  ').concat(n,"\n</section>")},kt=function(t,n){var e=t.buttons,r=t.content;return'<section class="multiple-pages">\n  <ul class="sub-nav">\n    '.concat(e.map(function(t,e){return'<li class="'.concat(e===n?"active":"",'"><a href="javascript:void(0);" data-export="page:').concat(e,'">').concat(t,"</a></li>")}).join(""),'\n  </ul>\n  <button class="close" data-export="close">').concat(dt(24),'</button>\n  <div class="content">').concat(r[n],"</div>\n</section>")};function Ct(r){var e=S.fromString('<div class="popup"></div>'),t=S.withRelaxedCleanup("body"),n=S.withRelaxedCleanup(".layout"),i=t.onKeyUp(function(t){return t.keyCode===xt&&o()}),o=function(){i(),e.css("opacity",0),r.cleanUp&&r.cleanUp(),setTimeout(function(){return e.destroy()},200),n.css("filter","none")};n.css("filter","blur(2px)"),e.appendTo(t),function n(t){e.content(t).forEach(function(t){var e=t.attr("data-export");"close"===e?t.onClick(o):e.match(/^page/)&&t.onClick(function(){return n(kt(r,Number(e.split(":").pop())))})}),r.onRender&&r.onRender(ft()({closePopup:o},e.namedExports()))}("buttons"in r?kt(r,r.defaultTab):_t(r)),setTimeout(function(){return e.css("opacity",1)},1)}var Et=13;function St(s,c,u,l,f){Ct({title:"Edit",content:'\n      <input name="filename" data-export="filenameInput" value="'.concat(s,'"/>\n      <button class="save secondary" data-export="saveButton">').concat(pt(),'<span>Update</span></button>\n      <button class="save secondary" data-export="setAsEntryPointButton">').concat(vt(20),'<span>Entry point</span></button>\n      <button class="delete secondary right" data-export="deleteButton">').concat(ht(),"<span>Delete</span></button>\n    "),onRender:function(t){var e=t.filenameInput,n=t.saveButton,r=t.closePopup,i=t.deleteButton,o=t.setAsEntryPointButton,a=function(){""!==e.e.value&&l(e.e.value),r()};e.e.focus(),e.e.setSelectionRange(0,s.lastIndexOf(".")),e.onKeyUp(function(t){t.keyCode===Et&&a()}),n.onClick(a),1<c?i.css("display","block"):i.css("display","none"),i.onClick(function(){return u(),r()}),o.onClick(function(){return f(),r()})}})}var jt=13;var Mt=n(7),qt=n.n(Mt),Ot=function(t){return'<iframe src="'.concat(t,'" style="display: block; width:100%; height: 400px; border:0; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-top-navigation-by-user-activation"></iframe>')},At="/poet.code.zip";function Tt(t){return zt.apply(this,arguments)}function zt(){return(zt=y()(v.a.mark(function t(e){var n,r=arguments;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=1<r.length&&void 0!==r[1]&&r[1],t.next=3,fetch(e);case 3:return t.t0=n?"blob":"text",t.next=6,t.sent[t.t0]();case 6:return t.t1=t.sent,t.t2=e,t.abrupt("return",{content:t.t1,url:t.t2});case 9:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function Nt(){return It.apply(this,arguments)}function It(){return(It=y()(v.a.mark(function t(){var e;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object.keys(O()),t.next=3,Promise.all(e.filter(function(t){return t.match(/^(http|https)/)}).map(Tt));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}var Lt=function(t){return t.filter(function(t){return""!==t&&"\n"!==t})};function Dt(d,g,m){return function(t){return o=d,i=y()(v.a.mark(function t(e){var r,i;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.prop("disabled","disabled").prop("innerHTML","Please wait. Preparing the zip file."),t.prev=1,t.next=4,Nt();case 4:return r=t.sent,t.next=7,q(["./resources/jszip.min.js","./resources/FileSaver.min.js"]);case 7:return t.t0=JSZip,t.next=10,Tt(At,!0);case 10:return t.t1=t.sent.content,t.next=13,t.t0.loadAsync.call(t.t0,t.t1);case 13:i=t.sent,e.prop("disabled",!1).prop("innerHTML","Download poet.code.zip"),e.onClick(y()(v.a.mark(function t(){var e,n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.file("index.html").async("string");case 2:return e=t.sent,(n=JSON.parse(JSON.stringify(o.dump()))).dependencies=r.map(function(t){var e=t.content,n="./resources/"+t.url.split("/").pop();return i.file(n,e),n}),i.file("index.html",e.replace("var state = null;","var state = ".concat(JSON.stringify(n),";"))),t.t0=saveAs,t.next=9,i.generateAsync({type:"blob"});case 9:t.t1=t.sent,(0,t.t0)(t.t1,"poet.code.zip");case 11:case"end":return t.stop()}},t,this)}))),t.next=22;break;case 18:t.prev=18,t.t2=t.catch(1),console.error(t.t2),e.prop("innerHTML","There is an error creating the zip file.");case 22:case"end":return t.stop()}},t,this,[[1,18]])})),l=function(t){return i.apply(this,arguments)},e=d.getEditorSettings(),f=Lt(d.getDependencies()).join("\n"),n=t,r=d.version(),h=e.layout,p=e.theme,new Promise(function(t){return Ct({defaultTab:n||0,buttons:["General","Dependencies","Export/Share","About"],content:['\n        <p>\n          Theme:\n          <select data-export="themePicker">\n            <option value="light">light</option>\n            <option value="dark">dark</option>\n          </select>\n        </p>\n        <p class="mt1">Layout:</p>\n        <div class="mb1" data-export="layoutArchitectContainer"></div>\n        <button class="save" data-export="saveGeneral">Save</button>\n      ','\n        <textarea class="dependencies-list" data-export="dependenciesTextarea"></textarea>\n        <p><small>(Separate your dependencies by a new line)</small></p>\n        <button class="save" data-export="saveDependenciesButton">Save</button>\n      ','\n        <h2>Embed</h2>\n        <textarea data-export="iframeTextarea">'.concat(Ot(window.location.href),"</textarea>\n        ").concat(X?'\n          <h2 class="mt1">Download/Offline mode</h2>\n          <p>Demo.zip archive contains all the files that you need to run the app locally. Including your dependencies.</p>\n          <button class="save" data-export="downloadButton">Download zip file</button>':"","\n      "),"\n        <p>\n          v".concat(r,'<br />\n          On the web: <a href="https://demoit.app" target="_blank">demoit.app</a><br />\n          GitHub repo: <a href="https://github.com/krasimir/demoit" target="_blank">github.com/krasimir/demoit</a>\n        </p>\n      ')],cleanUp:function(){t()},onRender:function(t){var n=t.closePopup,e=t.saveGeneral,r=t.dependenciesTextarea,i=t.saveDependenciesButton,o=t.themePicker,a=t.iframeTextarea,s=t.layoutArchitectContainer,c=t.downloadButton;if(s&&o){var u=qt()(s.e,b,h);o.e.value=p||"light",e.onClick(function(){var t,e;t=o.e.value,e=u.get()||w,d.updateTheme(t),d.updateLayout(e),g(),n()})}a&&a.selectOnClick(),c&&l(c),r&&i&&(r.prop("value",f),i.onClick(function(){var t;(t=r.prop("value").split(/\r?\n/))&&(d.setDependencies(t),m()),n()}))}})});var l,e,f,n,r,h,p,o,i}}var Bt="6px",Pt="36px",Ft=function(t){return'<img src="'.concat(t.avatar,'"/>')},Rt=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";return'<a data-export="'.concat(t,'" class="').concat(n,'" href="javascript:void(0)">').concat(e,"</a>")},Ht=function(t,e){return Array(e).join(t)};function Ut(f,h,p,d,g,m,v,y){var b=S.withRelaxedCleanup(".status-bar"),w=S.withRelaxedCleanup(".app .layout"),i=S.withRelaxedCleanup(".status-bar-tooltip"),x=!!f.getEditorSettings().statusBar,_=function(t,e,n,r){t.onMouseOver(function(){i.attr("class","status-bar-tooltip "+n).css("display","block").css(n,r+"px").content(e)}),t.onMouseOut(function(){i.clearCSS().css("display","none")})},t=function(){var o=[],t=f.getFiles();o.push('<div data-export="buttons">'),t.forEach(function(t){var e=k()(t,2),n=e[0],r=e[1],i=f.isCurrentFile(n);o.push(Rt("file:"+n,"<span>".concat(n).concat(i&&f.pendingChanges()?"*":"","</span>"),"file".concat(i?" active":"").concat(r.en?" entry":"")))}),o.push(Rt("newFileButton",gt(14),"")),o.push(Rt("nameButton",f.meta().name?f.meta().name:"unnamed","name")),X&&o.push(Rt("profileButton",f.loggedIn()?Ft(f.getProfile()):yt(),"profile")),f.isForkable()&&o.push(Rt("forkButton",bt(14))),o.push(Rt("shareButton",wt(14))),o.push(Rt("settingsButton",mt(14))),o.push(Rt("closeButton",dt(14))),o.push("</div>"),b.content(o.join("")).forEach(function(t){if(0===t.attr("data-export").indexOf("file")){var e=t.attr("data-export").split(":").pop();t.onClick(function(){f.isCurrentFile(e)?f.pendingChanges()&&v():h(e)}),t.onRightClick(function(){return d(e)})}});var e=b.namedExports(),n=e.newFileButton,r=e.closeButton,i=e.settingsButton,a=e.profileButton,s=e.forkButton,c=e.nameButton,u=e.shareButton,l=function(){var t=b.namedExports().buttons;t.css("display",x?"grid":"none"),t.css("gridTemplateColumns",[Ht("minmax(auto, 135px) ",f.getNumOfFiles()+1),"30px","1fr",!!X&&"34px",!!f.isForkable()&&"30px","30px","30px","30px"].filter(function(t){return t}).join(" ")),b.css("height",x?Pt:Bt),w.css("height","calc(100% - ".concat(x?Pt:Bt,")")),f.updateStatusBarVisibility(x)};n&&n.onClick(p),u&&u.onClick(function(){return g(2)}),i&&i.onClick(function(){return g()}),a&&a.onClick(m),f.isDemoOwner()&&c&&c.onClick(y),s&&s.onClick(function(){return f.fork()}),r.onClick(function(t){t.stopPropagation(),x=!1,l()}),b.onClick(function(){x||(x=!0,l())}),a&&_(a,f.loggedIn()?"Your profile":"Log in","right",f.loggedIn()?122:94),s&&_(s,"&#8600; Fork this story","right",90),_(u,"Embed or save locally","right",60),_(i,"Settings","right",29),_(r,"Close status bar","right",2),l()};t(),f.listen(t)}var Gt={grandAccess:function(t){window.top.location.href="/login?did=".concat(t)}};function Vt(t){return{showProfile:function(){t.loggedIn()?window.location.href="/u/"+t.getProfile().id:Gt.grandAccess(t.getDemoId())},fallbackUI:function(t){var e=S(".layout");e.content('\n        <div class="authentication-failed">\n          <h1>Authentication failed</h1>\n          <p>Reason: '.concat(t&&t.message?t.message:"Unknown",'</p>\n          <p>\n            <a href="javascript:void(0);" data-export="goBack">Go back</a><br />\n            <a href="https://github.com/krasimir/poet.codes.feedback/issues">Report an issue</a><br />\n          </p>\n        </div>\n      ')),e.namedExports().goBack.onClick(function(){return window.top.location.href=U("code",window.top.location.href)})}}}var Jt=n(8),Kt=n.n(Jt),Yt=n(5),Wt=4,Xt=25;function Zt(v,y){var b,w=S.withFallback(".story"),x=v.git(),_=null,k=!1,C=function(t){return x.amend(b,t)},E=function(t){k=!1,_=null,""===t&&x.amend(b,function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Date,e=t.getDate(),n=t.getMonth(),r=t.getFullYear().toString().substr(-2);return e+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n]+" "+r+" "+t.getHours()+":"+t.getMinutes()}()),e()};if(!w.found())return!1;var e=function e(){var f,h,p,d,t,c=Object.keys(x.log()).length,n=0<c,r=Kt()(n?x.show().files:[],x.getAll()),i=(f=x,h=k,p=0<r.length,d=b,null!==(t=f.logAsTree())?function t(e){var n,r=e.hash,i=e.message,o=e.derivatives,a=e.meta,s=a&&0<parseInt(a.position,10)?"#".concat(parseInt(a.position,10)):"",c=J(i.split("\n").shift(),36),u=(f.head()===r?'<span class="commit-head">&#8594;</span>':"")+c,l=p||h?'<span style="opacity:0.4;">'.concat(u,"</span>"):'<a href="javascript:void(0);" data-export="checkoutLink" data-commit-hash="'.concat(r,'">').concat(u,"</a>");return'\n      <div class="commit'.concat(d===r&&h?" commit-edit":"",'" id="c').concat(r,'">\n        ').concat(d===r&&h?'\n              <div class="story-form">\n                <div class="story-form-bar">\n                  <a href="javascript:void(0);" data-export="confirmButton">'.concat(pt(12),' save</a>\n                  <a href="javascript:void(0);" data-export="closeButton">').concat(dt(12),' cancel</a>\n                  <select data-export="publishStatus">\n                    ').concat(function(t,e){var n=f.log(),r=n[e].meta,i=r?parseInt(r.position,10):null,o=[];o.push('<option value="0"'.concat(0===i?'selected="selected"':"",">not in story</option>"));for(var a=1;a<Object.keys(n).length+1;a++)o.push('<option value="'.concat(a,'" ').concat(i===a?'selected="selected"':"",">position #").concat(a,"</option>"));return o.join("")}(0,r),'\n                  </select>\n                  <select data-export="injectFile">\n                    <option value="">inject a file</option>\n                    ').concat((n=r,f.show(n).files.map(function(t){return'<option value="{file:'.concat(t[0],'}">').concat(t[0],"</option>")})),'\n                  </select>\n                </div>\n                <div data-export="messageArea" class="message-area"></div>\n              </div>\n            '):'\n              <div class="commit-nav">\n                <span class="current-position">'.concat(s,'</span>\n                <a href="javascript:void(0);" data-export="editMessage" data-commit-hash="').concat(r,'">&#9998; story</a>\n                ').concat(p?"":'<a href="javascript:void(0);" data-export="deleteCommit" data-commit-hash="'.concat(r,'" data-commit-message="').concat(c,'">&#10006; delete</a>'),"\n              </div>\n              ").concat(l,"\n            "),"\n      </div>\n    ")+o.map(t).join("")}(t):"");w.attr("class",c<=1?"editor-section story no-graph":"editor-section story"),w.content("\n      <div>\n        ".concat(i?'<div data-export="list">'+i+"</div>":"","\n        ").concat(0<r.length?'<div class="working-directory">\n            <div class="diffs">\n              '.concat(r.map($t).join(""),'\n            </div>\n            <div class="centered">\n              <a href="javascript:void(0)" data-export="addButton" class="add-button">\n                ').concat(n?"&#10010; You have unstaged changes. Commit them by clicking here.":"&#10010; Click here to make your first commit.","\n              </a>\n            </div>\n          </div>\n          "):"",'\n      </div>\n      <div class="story-arrows"><svg id="svg-canvas" width="32px" height="98%"></svg></div>\n    ')).forEach(function(o){"checkoutLink"===o.attr("data-export")&&o.onClick(function(){x.checkout(o.attr("data-commit-hash")),y()}),"editMessage"===o.attr("data-export")&&o.onClick(function(){k=!0,b=o.attr("data-commit-hash"),e()}),"deleteCommit"===o.attr("data-export")&&o.onClick(function(){var t;t='Deleting "'.concat(o.attr("data-commit-message"),'" commit. Are you sure?'),Ct({title:"Deleting a commit",content:'\n      <p class="mb3">'.concat(t,'</p>\n      <button class="save secondary" data-export="yesButton">').concat(pt(),'<span>Yes</span></button>\n      <button class="save secondary right" data-export="noButton">').concat(dt(),"<span>No</span></button>\n    "),onRender:function(t){var e=t.yesButton,n=t.noButton,r=t.closePopup,i=function(t){t&&x.adios(o.attr("data-commit-hash")),r()};e.onClick(function(){return i(!0)}),n.onClick(function(){return i(!1)})}})})});var o=w.namedExports(),a=o.addButton,s=o.messageArea,u=o.confirmButton,l=o.closeButton,g=o.publishStatus,m=o.injectFile;a&&a.onClick(function(){k=!0,x.add(),b=x.commit(""),e()}),s&&(_=function(t,e,n,r,i,o){z(CodeMirror);var a=CodeMirror(t.e,ft()({value:n||"",mode:"markdown",tabSize:2,lineNumbers:!1,autofocus:!0,foldGutter:!1,gutters:[],styleSelectedText:!0,lineWrapping:!0,highlightFormatting:!0},e)),s=function(){return t=a.getValue(),u.css("opacity","0.3"),void C(t);var t};return a.on("change",function(){return a.getValue(),u.css("opacity","1"),void(1<c&&Qt(x.logAsTree()))}),a.setOption("extraKeys",{"Ctrl-S":s,"Cmd-S":s,Esc:function(){return o(a.getValue())},"Ctrl-Enter":function(){return s(),o(a.getValue())},"Cmd-Enter":function(){return s(),o(a.getValue())}}),CodeMirror.normalizeKeyMap(),setTimeout(function(){return a.focus()},50),a}(s,v.getEditorSettings(),x.show(b).message,0,0,E),u.onClick(function(){C(_.getValue()),k=!1,_=null,e()}),l.onClick(function(){k=!1,_=null,e()}),g.onChange(function(t){x.amend(b,x.show(b).message,{position:t}),k=!1,_=null,e()}),m.onChange(function(t){setTimeout(function(){_.focus(),_.refresh(),_.replaceSelection(t),m.e.value=""},1)})),1<c&&Qt(x.logAsTree())};return x.listen(function(t){k||e()}),e(),function(t,e){k&&_&&(e.setCursor({line:0,ch:0}),setTimeout(function(){_.focus(),_.refresh(),_.replaceSelection(t)},1))}}function $t(t){var e="",n="";switch(t[0]){case"E":e="edit",n=t[2].html;break;case"N":e="new";break;case"D":e="deleted";break;case"R":e="renamed",n=t[2]}return'\n    <div class="diff">\n      <div><span class="label label-'.concat(t[0],'">').concat(e,'</span></div>\n      <div class="diffA">').concat(t[1],'</div>\n      <div class="diffB">').concat(n,"</div>\n    </div>\n  ")}function Qt(n){setTimeout(function(){Object(Yt.empty)();var t=function e(t){var n=t.parent,r=t.hash,i=t.derivatives,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{y:Xt,connections:[],yValues:{}};return o.yValues[r]=o.y,o.y+=S("#c"+r).e.offsetHeight+.3,null!==n&&o.connections.push([n,r]),0<i.length&&i.forEach(function(t){return e(t,o)}),o}(n),e=t.connections,i=t.yValues;e.forEach(function(t){var e=k()(t,2),n=e[0],r=e[1];return Object(Yt.connectCommits)(Wt,i[n],i[r])})},30)}(function(t){return ut.apply(this,arguments)})(o.version).then(function(u){function s(){return t.apply(this,arguments)}function t(){return(t=y()(v.a.mark(function t(){var r,e,n,i,o,a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c(u),r=Zt(u,function(){return n()}),t.next=4,I(u,[function(t,e,n){return t===N&&r(e,n)}]);case 4:e=t.sent,n=e.loadFileInEditor,i=e.save,n(),o=Dt(u,function(){return S.destroy(),s()},function(){return n()}),a=Vt(u).showProfile,Ut(u,function(t){u.setActiveFile(t),n()},function(){var t=y()(v.a.mark(function t(){var e;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise(function(o){return Ct({title:"New file",content:'\n      <input name="filename" data-export="filenameInput" placeholder="untitled.js"/>\n      <button class="save secondary" data-export="saveButton">'.concat(pt(),"<span>Create</span></button>\n    "),cleanUp:function(){o()},onRender:function(t){var e=t.filenameInput,n=t.saveButton,r=t.closePopup,i=function(){""!==e.e.value&&o(e.e.value),r()};e.e.focus(),e.onKeyUp(function(t){13===t.keyCode&&i()}),n.onClick(i)}})});case 2:(e=t.sent)&&(u.addNewFile(e),n());case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),function(){var e=y()(v.a.mark(function t(e){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:St(e,u.getNumOfFiles(),function(){u.deleteFile(e),n()},function(t){u.renameFile(e,t),n()},function(){u.setEntryPoint(e),n()});case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),o,a,i,function(){var t,s,c,e,n,r;t=u.meta(),s=function(t){return u.meta(t)},c=t.name,e=t.id,n=t.description,r=t.published,Ct({title:"Edit demo name",content:'\n      <input data-export="nameInput" value="'.concat(c=c||"",'" placeholder="Name"/>\n      <textarea placeholder="Description" data-export="descriptionInput">').concat(n||"",'</textarea>\n      <label>\n        <input type="checkbox" data-export="publishCheckbox" ').concat(r?'checked="checked"':"",'/> Publish as a story at <a href="/e/').concat(e,'/story" target="_blank">/e/').concat(e,'/story</a>\n      </label>\n      <button class="save secondary" data-export="saveButton">').concat(pt(),"<span>Update</span></button>\n    "),onRender:function(t){var e=t.nameInput,n=t.descriptionInput,r=t.publishCheckbox,i=t.saveButton,o=t.closePopup,a=function(){""!==e.e.value&&s({name:e.e.value,description:n.e.value,published:r.e.checked}),o()};e.e.focus(),e.e.setSelectionRange(0,c.lastIndexOf(".")),e.onKeyUp(function(t){t.keyCode===jt&&a()}),i.onClick(a)}})});case 11:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}s()})}]);